

#include "DownhillMadness.h"
#include "VehicleSpawnerLibrary.h"


FSerializedVehicle::FSerializedVehicle()
{
	this->bodyClass = nullptr;
	this->wheelClasses = TArray<FWheelClass>();
	this->wheelClasses.Empty();
	this->weightClasses = TArray<FWeightClass>();
	this->weightClasses.Empty();
	this->steeringClass = nullptr;
	this->brakeClass = nullptr;
}


// ----------------------------------------------------------------------------


UVehicleSpawnerLibrary::UVehicleSpawnerLibrary(const class FPostConstructInitializeProperties& PCIP)
: Super(PCIP)
{
}


// ----------------------------------------------------------------------------


void UVehicleSpawnerLibrary::SerializeVehicle(FSerializedVehicle& outSerializedVehicle, AVehicleBodyBase* vehicle)
{
	if (vehicle == nullptr)
		return;

	outSerializedVehicle.bodyClass = vehicle->GetClass();
	FMatrix bodyMatrix = vehicle->Body->GetComponenTransform().ToMatrixNoScale();

	for (TArray<AVehicleWheelBase*>::TIterator wheelIter(vehicle->attachedWheels); wheelIter; ++wheelIter)
	{
		AVehicleWheelBase* currentWheel = *wheelIter;
		FMatrix wheelMatrix = currentWheel->WheelConstraint->GetComponenTransform().ToMatrixNoScale();
		FMatrix relativeMatrix = wheelMatrix * bodyMatrix.InverseSafe();

		outSerializedVehicle.wheelClasses.Add(FWheelClass(currentWheel->GetClass(), currentWheel->bIsSteerable, currentWheel->bHasBrake, relativeMatrix));
	}

	for (TArray<AVehicleWeightBase*>::TIterator weightIter(vehicle->attachedWeights); weightIter; ++weightIter)
	{
		AVehicleWeightBase* currentWeight = *weightIter;
		FMatrix weightMatrix = currentWeight->PhysicsConstraint->GetComponenTransform().ToMatrixNoScale();
		FMatrix relativeMatrix = weightMatrix * bodyMatrix.InverseSafe();

		outSerializedVehicle.weightClasses.Add(FWeightClass(currentWeight->GetClass(), relativeMatrix));
	}

	if (vehicle->attachedSteering != nullptr)
		outSerializedVehicle.steeringClass = vehicle->attachedSteering->GetClass();

	if (vehicle->attachedBrake != nullptr)
		outSerializedVehicle.brakeClass = vehicle->attachedBrake->GetClass();
}


// ----------------------------------------------------------------------------


AVehicleBodyBase* UVehicleSpawnerLibrary::SpawnVehicle(UObject* WorldContextObject, const FSerializedVehicle& inSerializedVehicle, FVector spawnLocation, FRotator spawnRotation)
{
	if (WorldContextObject == nullptr)
		return nullptr;

	UWorld* currentWorld = WorldContextObject->GetWorld();

	if (inSerializedVehicle.bodyClass != nullptr)
	{
		FActorSpawnParameters spawnParameters;

		AVehicleBodyBase* vehicleBody = (AVehicleBodyBase*)(currentWorld->SpawnActor(inSerializedVehicle.bodyClass, &spawnLocation, &spawnRotation, spawnParameters));

		if (vehicleBody != nullptr)
		{
			FMatrix bodyMatrix = FRotationTranslationMatrix(spawnRotation, spawnLocation);

			for (TArray<FWheelClass>::TConstIterator wheelIter(inSerializedVehicle.wheelClasses); wheelIter; ++wheelIter)
			{
				FWheelClass currentWheel = *wheelIter;
				FMatrix wheelMatrix = currentWheel.relativeWheelMatrix * bodyMatrix;

				FVector wheelSpawnPos = wheelMatrix.GetOrigin();
				FRotator wheelSpawnRotation = wheelMatrix.Rotator();

				AVehicleWheelBase* vehicleWheel = (AVehicleWheelBase*)(currentWorld->SpawnActor(currentWheel.classInstance, &wheelSpawnPos, &wheelSpawnRotation, spawnParameters));
				if (currentWheel.isSteerable != 0)
					vehicleWheel->bIsSteerable = true;
				else
					vehicleWheel->bIsSteerable = false;
				if (currentWheel.hasBrake != 0)
					vehicleWheel->bHasBrake = true;
				else
					vehicleWheel->bHasBrake = false;

				vehicleBody->AttachWheel(vehicleWheel);
			}

			for (TArray<FWeightClass>::TConstIterator weightIter(inSerializedVehicle.weightClasses); weightIter; ++weightIter)
			{
				FWeightClass currentWeight = *weightIter;
				FMatrix weightMatrix = currentWeight.relativeWeightMatrix * bodyMatrix;

				FVector weightSpawnPos = weightMatrix.GetOrigin();
				FRotator weightSpawnRotation = weightMatrix.Rotator();

				AVehicleWeightBase* vehicleWeight = (AVehicleWeightBase*)(currentWorld->SpawnActor(currentWeight.classInstance, &weightSpawnPos, &weightSpawnRotation, spawnParameters));

				vehicleBody->AttachWeight(vehicleWeight);
			}

			if (inSerializedVehicle.steeringClass != nullptr)
			{
				AVehicleSteeringBase* vehicleSteering = (AVehicleSteeringBase*)(currentWorld->SpawnActor(inSerializedVehicle.steeringClass, &spawnLocation, &spawnRotation, spawnParameters));
				vehicleBody->AttachSteering(vehicleSteering);
			}

			if (inSerializedVehicle.brakeClass != nullptr)
			{
				AVehicleBrakeBase* vehicleBrake = (AVehicleBrakeBase*)(currentWorld->SpawnActor(inSerializedVehicle.brakeClass, &spawnLocation, &spawnRotation, spawnParameters));
				vehicleBody->AttachBrake(vehicleBrake);
			}

			return vehicleBody;
		}
	}

	return nullptr;
}


// ----------------------------------------------------------------------------


void UVehicleSpawnerLibrary::SaveLoadData(FSerializedVehicle& outSerializedVehicle, FArchive& archive)
{
	if (archive.IsLoading())
	{
		uint8 classExists;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			archive << className;
			outSerializedVehicle.bodyClass = FObjectReaderFix::FindClass(className);
		}
	}
	else
	{
		uint8 classExists = 0;
		if (outSerializedVehicle.bodyClass != nullptr)
			classExists = 1;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			if (outSerializedVehicle.bodyClass->ClassGeneratedBy != nullptr)
				className = outSerializedVehicle.bodyClass->ClassGeneratedBy->GetFName().ToString();
			else
				className = outSerializedVehicle.bodyClass->GetFName().ToString();
			archive << className;
		}
	}

	int numWheels = outSerializedVehicle.wheelClasses.Num();
	archive << numWheels;
	outSerializedVehicle.wheelClasses.Reserve(numWheels);
	for (int i = 0; i < numWheels; i++)
	{
		if (i >= outSerializedVehicle.wheelClasses.Num())
			outSerializedVehicle.wheelClasses.Add(FWheelClass());
		archive << outSerializedVehicle.wheelClasses[i];
	}

	int numWeights = outSerializedVehicle.weightClasses.Num();
	archive << numWeights;
	outSerializedVehicle.weightClasses.Reserve(numWeights);
	for (int i = 0; i < numWeights; i++)
	{
		if (i >= outSerializedVehicle.weightClasses.Num())
			outSerializedVehicle.weightClasses.Add(FWeightClass());
		archive << outSerializedVehicle.weightClasses[i];
	}

	if (archive.IsLoading())
	{
		uint8 classExists;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			archive << className;
			outSerializedVehicle.steeringClass = FObjectReaderFix::FindClass(className);
		}
	}
	else
	{
		uint8 classExists = 0;
		if (outSerializedVehicle.steeringClass != nullptr)
			classExists = 1;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			if (outSerializedVehicle.steeringClass->ClassGeneratedBy != nullptr)
				className = outSerializedVehicle.steeringClass->ClassGeneratedBy->GetFName().ToString();
			else
				className = outSerializedVehicle.steeringClass->GetFName().ToString();
			archive << className;
		}
	}

	if (archive.IsLoading())
	{
		uint8 classExists;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			archive << className;
			outSerializedVehicle.brakeClass = FObjectReaderFix::FindClass(className);
		}
	}
	else
	{
		uint8 classExists = 0;
		if (outSerializedVehicle.brakeClass != nullptr)
			classExists = 1;
		archive << classExists;

		if (classExists != 0)
		{
			FString className;
			if (outSerializedVehicle.brakeClass->ClassGeneratedBy != nullptr)
				className = outSerializedVehicle.brakeClass->ClassGeneratedBy->GetFName().ToString();
			else
				className = outSerializedVehicle.brakeClass->GetFName().ToString();
			archive << className;
		}
	}
}


// ----------------------------------------------------------------------------


bool UVehicleSpawnerLibrary::SaveToFile(const FSerializedVehicle& inSerializedVehicle, const FString& filePath)
{
	TArray<uint8> dataArray;
	FObjectWriterFix archive(dataArray);
	FSerializedVehicle saveVehicle = inSerializedVehicle;
	UVehicleSpawnerLibrary::SaveLoadData(saveVehicle, archive);

	if (dataArray.Num() <= 0) return false;

	if (FFileHelper::SaveArrayToFile(dataArray, *filePath))
	{
		archive.FlushCache();
		dataArray.Empty();

		return true;
	}

	archive.FlushCache();
	dataArray.Empty();

	return false;
}


// ----------------------------------------------------------------------------


bool UVehicleSpawnerLibrary::SaveToArray(const FSerializedVehicle& inSerializedVehicle, TArray<uint8>& binaryArray)
{
	TArray<uint8> dataArray;
	FObjectWriterFix archive(dataArray);
	FSerializedVehicle saveVehicle = inSerializedVehicle;
	UVehicleSpawnerLibrary::SaveLoadData(saveVehicle, archive);

	if (dataArray.Num() <= 0) return false;

	binaryArray = TArray<uint8>(dataArray);

	archive.FlushCache();
	dataArray.Empty();

	return false;
}


// ----------------------------------------------------------------------------


bool UVehicleSpawnerLibrary::LoadFromFile(FSerializedVehicle& outSerializedVehicle, const FString& filePath)
{
	TArray<uint8> binaryArray;

	if (!FFileHelper::LoadFileToArray(binaryArray, *filePath))
	{
		return false;
	}

	if (binaryArray.Num() <= 0) return false;

	FObjectReaderFix archive(binaryArray);
	archive.Seek(0);
	UVehicleSpawnerLibrary::SaveLoadData(outSerializedVehicle, archive);

	archive.FlushCache();

	binaryArray.Empty();
	archive.Close();

	return true;
}


// ----------------------------------------------------------------------------


bool UVehicleSpawnerLibrary::LoadFromArray(FSerializedVehicle& outSerializedVehicle, const TArray<uint8>& inArray)
{
	TArray<uint8> binaryArray(inArray);

	if (binaryArray.Num() <= 0) return false;

	FObjectReaderFix archive(binaryArray);
	archive.Seek(0);
	UVehicleSpawnerLibrary::SaveLoadData(outSerializedVehicle, archive);

	archive.FlushCache();

	binaryArray.Empty();
	archive.Close();

	return true;
}


// ----------------------------------------------------------------------------


void UVehicleSpawnerLibrary::LoadStaticVehicle(FSerializedVehicle& outSerializedVehicle, uint8 index)
{
	TArray<uint8> vehicleData;
	vehicleData.Empty();
	uint8* fillData = nullptr;

	int32 numElements = 0;

	switch (index)
	{
	case 0:
		numElements = 654;
		fillData = new uint8[numElements]{ 0x01, 0x10, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x18, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x0B, 0x11, 0x8D, 0xB6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x11, 0x8D, 0x36, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x34, 0x42, 0x64, 0x00, 0xF0, 0x41, 0x00, 0x44, 0xA7, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x18, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x0B, 0x11, 0x8D, 0xB6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x11, 0x8D, 0x36, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0xC2, 0x92, 0xFF, 0xEF, 0x41, 0x00, 0x44, 0xA7, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x18, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x16, 0x22, 0xCA, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x16, 0x22, 0xCA, 0xB6, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x34, 0x42, 0x9D, 0xFF, 0xEF, 0xC1, 0x00, 0x44, 0xA7, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x18, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x16, 0x22, 0xCA, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x16, 0x22, 0xCA, 0xB6, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0xC2, 0x6F, 0x00, 0xF0, 0xC1, 0x00, 0x44, 0xA7, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x02, 0x00, 0x00, 0x00, 0x01, 0x12, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x0B, 0x11, 0x8D, 0xB6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x11, 0x8D, 0x36, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x9A, 0x11, 0xC2, 0xA0, 0x00, 0x20, 0xC1, 0x00, 0x00, 0xCC, 0xBD, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x12, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x0B, 0x11, 0x8D, 0xB6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x11, 0x8D, 0x36, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x9A, 0x11, 0xC2, 0x5F, 0xFF, 0x1F, 0x41, 0x00, 0x00, 0xCC, 0xBD, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x14, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x11, 0x00, 0x00, 0x00, 0x54, 0x65, 0x73, 0x74, 0x56, 0x65, 0x68, 0x69, 0x63, 0x6C, 0x65, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;

	case 1:
		numElements = 449;
		fillData = new uint8[numElements]{ 0x01, 0x0F, 0x00, 0x00, 0x00, 0x44, 0x72, 0x61, 0x67, 0x6F, 0x6E, 0x42, 0x6F, 0x61, 0x74, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0xC1, 0x28, 0xB4, 0x07, 0xC2, 0x40, 0xC8, 0x8C, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x8C, 0x42, 0xE0, 0x0F, 0xF6, 0xC1, 0x40, 0xC8, 0x8C, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0xC1, 0x2C, 0xB4, 0x07, 0x42, 0x40, 0xC8, 0x8C, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x8C, 0x42, 0xC8, 0x0F, 0xF6, 0x41, 0x40, 0xC8, 0x8C, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0D, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x61, 0x74, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x44, 0x65, 0x66, 0x61, 0x75, 0x6C, 0x74, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x73, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;

	case 2:
		numElements = 435;
		fillData = new uint8[numElements]{ 0x01, 0x09, 0x00, 0x00, 0x00, 0x46, 0x69, 0x73, 0x68, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x11, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x6E, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0xC2, 0xF8, 0x50, 0xF6, 0xC1, 0x80, 0x3D, 0x73, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x6E, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x42, 0x88, 0x80, 0xEF, 0xC1, 0x80, 0x3D, 0x73, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x6E, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0xC2, 0xFC, 0x54, 0xF8, 0x41, 0x80, 0x3D, 0x73, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x6E, 0x65, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x42, 0x88, 0x80, 0xEF, 0x41, 0x80, 0x3D, 0x73, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0D, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x61, 0x74, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x44, 0x65, 0x66, 0x61, 0x75, 0x6C, 0x74, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x73, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;

	case 3:
		numElements = 787;
		fillData = new uint8[numElements]{ 0x01, 0x0B, 0x00, 0x00, 0x00, 0x48, 0x6F, 0x74, 0x52, 0x6F, 0x64, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x13, 0x00, 0x00, 0x00, 0x48, 0x6F, 0x74, 0x52, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0xC2, 0x98, 0x46, 0x73, 0xC2, 0x20, 0x7F, 0x13, 0xC2, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x48, 0x6F, 0x74, 0x52, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF4, 0x42, 0x58, 0x3F, 0x55, 0xC2, 0x20, 0x7F, 0x13, 0xC2, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x48, 0x6F, 0x74, 0x52, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0xC2, 0xA0, 0x46, 0x73, 0x42, 0x20, 0x7F, 0x13, 0xC2, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x48, 0x6F, 0x74, 0x52, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF4, 0x42, 0x50, 0x3F, 0x55, 0x42, 0x20, 0x7F, 0x13, 0xC2, 0x00, 0x00, 0x80, 0x3F, 0x04, 0x00, 0x00, 0x00, 0x01, 0x12, 0x00, 0x00, 0x00, 0x4D, 0x75, 0x66, 0x66, 0x6C, 0x65, 0x72, 0x4C, 0x65, 0x66, 0x74, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA6, 0x42, 0x80, 0x24, 0xBD, 0xC1, 0x00, 0x16, 0x17, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x4D, 0x75, 0x66, 0x66, 0x6C, 0x65, 0x72, 0x52, 0x69, 0x67, 0x68, 0x74, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x35, 0xFA, 0x8E, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x35, 0xFA, 0x8E, 0x35, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA6, 0x42, 0x70, 0x24, 0xC5, 0x41, 0x00, 0x16, 0x17, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x0C, 0x00, 0x00, 0x00, 0x53, 0x6B, 0x75, 0x6C, 0x6C, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x3F, 0xFE, 0xFF, 0xBF, 0x34, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFF, 0xBF, 0xB4, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x40, 0x10, 0xFB, 0x42, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x48, 0xC4, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x43, 0x6F, 0x6D, 0x70, 0x72, 0x65, 0x73, 0x73, 0x6F, 0x72, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x35, 0xFA, 0x8E, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x35, 0xFA, 0x8E, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA6, 0x42, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0xFF, 0x3F, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x0D, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x61, 0x74, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x44, 0x65, 0x66, 0x61, 0x75, 0x6C, 0x74, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x73, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;

	case 4:
		numElements = 447;
		fillData = new uint8[numElements]{ 0x01, 0x0D, 0x00, 0x00, 0x00, 0x4D, 0x6A, 0x6F, 0x65, 0x6C, 0x6E, 0x69, 0x72, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x64, 0xC2, 0x78, 0x7B, 0x9E, 0xC2, 0x80, 0x00, 0x30, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x94, 0x42, 0xB0, 0x94, 0xD0, 0xC2, 0x80, 0x00, 0x30, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x64, 0xC2, 0x00, 0x3D, 0x9E, 0x42, 0x80, 0x00, 0x30, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x13, 0x00, 0x00, 0x00, 0x53, 0x68, 0x69, 0x65, 0x6C, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x94, 0x42, 0x30, 0x56, 0xD0, 0x42, 0x80, 0x00, 0x30, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0D, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x61, 0x74, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x44, 0x65, 0x66, 0x61, 0x75, 0x6C, 0x74, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x73, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;

	case 5:
		numElements = 604;
		fillData = new uint8[numElements]{ 0x01, 0x0C, 0x00, 0x00, 0x00, 0x57, 0x61, 0x73, 0x68, 0x54, 0x75, 0x62, 0x42, 0x6F, 0x64, 0x79, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x11, 0x00, 0x00, 0x00, 0x57, 0x6F, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC1, 0x00, 0xAC, 0x0A, 0xC2, 0x00, 0x9E, 0x89, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x57, 0x6F, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0x42, 0x80, 0x48, 0x1A, 0xC2, 0x00, 0x9E, 0x89, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x57, 0x6F, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC1, 0x40, 0x2C, 0x0B, 0x42, 0x00, 0x9E, 0x89, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x11, 0x00, 0x00, 0x00, 0x57, 0x6F, 0x6F, 0x64, 0x43, 0x61, 0x70, 0x73, 0x75, 0x6C, 0x65, 0x57, 0x68, 0x65, 0x65, 0x6C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xBF, 0x5A, 0x88, 0x68, 0xB5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0x88, 0x68, 0x35, 0x00, 0x00, 0x80, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0x42, 0xF0, 0x90, 0x19, 0x42, 0x00, 0x9E, 0x89, 0xC1, 0x00, 0x00, 0x80, 0x3F, 0x02, 0x00, 0x00, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x4D, 0x61, 0x74, 0x74, 0x6F, 0x63, 0x6B, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x33, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x7F, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x7F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x41, 0x20, 0xD3, 0x17, 0xC2, 0x00, 0xA0, 0x23, 0x41, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x4D, 0x61, 0x74, 0x74, 0x6F, 0x63, 0x6B, 0x57, 0x65, 0x69, 0x67, 0x68, 0x74, 0x00, 0x00, 0x00, 0x80, 0x33, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x7F, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x2E, 0xBD, 0xBB, 0x33, 0xFE, 0xFF, 0x7F, 0xBF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x7F, 0xBF, 0x2E, 0xBD, 0xBB, 0xB3, 0x00, 0x00, 0x80, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x41, 0x70, 0xC1, 0x15, 0x42, 0x00, 0xA0, 0x23, 0x41, 0x00, 0x00, 0x80, 0x3F, 0x01, 0x0D, 0x00, 0x00, 0x00, 0x42, 0x6F, 0x61, 0x74, 0x53, 0x74, 0x65, 0x65, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x44, 0x65, 0x66, 0x61, 0x75, 0x6C, 0x74, 0x42, 0x72, 0x61, 0x6B, 0x65, 0x73, 0x00 };

		vehicleData.Append(fillData, numElements);

		delete[] fillData;

		UVehicleSpawnerLibrary::LoadFromArray(outSerializedVehicle, vehicleData);

		vehicleData.Empty();

		break;
	}
}


// ----------------------------------------------------------------------------


FString UVehicleSpawnerLibrary::GetVehicleName(const FSerializedVehicle& inSerializedVehicle)
{
	if (inSerializedVehicle.bodyClass != nullptr)
	{
		FString vehicleName(TEXT(""));

		if (inSerializedVehicle.bodyClass->ClassGeneratedBy != nullptr)
			vehicleName += inSerializedVehicle.bodyClass->ClassGeneratedBy->GetFName().ToString();
		else
			vehicleName += inSerializedVehicle.bodyClass->GetFName().ToString();

		if (vehicleName.EndsWith(FString(TEXT("Body"))))
			vehicleName.RemoveAt(vehicleName.Len() - 4, 4, false);

		vehicleName = FName::NameToDisplayString(vehicleName, false);

		vehicleName += FString(TEXT(" ("));

		vehicleName += FString::FromInt(inSerializedVehicle.wheelClasses.Num());

		vehicleName += FString(TEXT(" Wheels, "));

		vehicleName += FString::FromInt(inSerializedVehicle.weightClasses.Num());

		vehicleName += FString(TEXT(" Weights)"));

		return vehicleName;
	}

	return FString(TEXT("---"));
}


// ----------------------------------------------------------------------------


UClass* FObjectReaderFix::FindClass(const FString& className)
{
	UClass* foundClass = FindObject<UClass>(ANY_PACKAGE, *className);

	if (foundClass == nullptr)
	{
		// Potentially dangerous code down here - couldn't find another way, though
		FString composedString = FString(TEXT("Blueprint'/Game/Blueprints/Karts/")) + className + FString(TEXT("'"));
		FString pathName(*composedString);
		ConstructorHelpers::StripObjectClass(pathName, true);

		UBlueprint* foundBlueprint = ConstructorHelpersInternal::FindOrLoadObject<UBlueprint>(pathName);

		if (foundBlueprint != nullptr)
			foundClass = foundBlueprint->GeneratedClass;
	}

	return foundClass;
}


// ----------------------------------------------------------------------------


FWheelClass::FWheelClass()
{
	this->classInstance = nullptr;
	this->isSteerable = 0;
	this->hasBrake = 0;
	this->relativeWheelMatrix = FMatrix::Identity;
}


// ----------------------------------------------------------------------------


FWeightClass::FWeightClass()
{
	this->classInstance = nullptr;
	this->relativeWeightMatrix = FMatrix::Identity;
}


// ----------------------------------------------------------------------------


FWheelClass::FWheelClass(UClass* classInstance, bool bIsSteerable, bool bHasBrake, const FMatrix& relativeWheelMatrix)
{
	this->classInstance = classInstance;
	if (bIsSteerable)
		this->isSteerable = 1;
	else
		this->isSteerable = 0;
	if (bHasBrake)
		this->hasBrake = 1;
	else
		this->hasBrake = 0;
	this->relativeWheelMatrix = relativeWheelMatrix;
}


// ----------------------------------------------------------------------------


FWeightClass::FWeightClass(UClass* classInstance, const FMatrix& relativeWeightMatrix)
{
	this->classInstance = classInstance;
	this->relativeWeightMatrix = relativeWeightMatrix;
}


